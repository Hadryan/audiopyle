sudo: required

language: python

services:
  - docker

script:
  - docker build -t "$DOCKER_USERNAME"/audiopyle-commons ./commons
  - docker build -t "$DOCKER_USERNAME"/audiopyle-coordinator ./coordinator
  - docker build -t "$DOCKER_USERNAME"/audiopyle-xtracter ./xtracter
  - bash devops/run_code_analysis.sh

after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    bash devops/push_docker_images.sh;
    fi